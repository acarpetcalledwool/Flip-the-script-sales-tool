<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mega Blinds Companion</title>
    <style>
        :root { 
            --p: #004a99; /* Mega Blue */
            --bg: #f4f6f9; 
            --txt: #212529; 
            --err: #dc3545; 
            --safe: #28a745;
            --warn: #ffc107;
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background: var(--bg); 
            color: var(--txt); 
            margin: 0; 
            padding: 0; 
            display: flex; 
            flex-direction: column; 
            height: 100vh;
        }

        /* --- HEADER & TABS --- */
        .header {
            background: #fff;
            padding: 10px 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }
        .nav-pill-container {
            display: flex;
            background: #e9ecef;
            border-radius: 12px;
            padding: 4px;
        }
        .nav-pill {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #6c757d;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
        }
        .nav-pill.active {
            background: #fff;
            color: var(--p);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* --- CONTENT AREA --- */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        .hidden { display: none; }

        /* --- CARDS & UI --- */
        .card {
            background: #fff;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            text-align: center;
            border-top: 6px solid var(--p);
            animation: slideIn 0.3s ease;
        }

        .prompt-box {
            background: #e7f1ff;
            border-left: 5px solid var(--p);
            padding: 15px;
            margin: 15px 0;
            text-align: left;
            border-radius: 8px;
        }
        .prompt-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--p);
            font-weight: 700;
            display: block;
            margin-bottom: 5px;
        }
        .prompt-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            line-height: 1.4;
        }

        .btn-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        .btn {
            background: #fff;
            border: 2px solid #e9ecef;
            padding: 16px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            color: #495057;
            cursor: pointer;
            text-align: left;
            transition: 0.2s;
        }
        .btn:active { transform: scale(0.98); }
        .btn.primary { border-color: var(--p); color: var(--p); }
        .btn.danger { border-color: var(--err); color: var(--err); }
        
        .sub-text {
            font-size: 0.85rem;
            color: #888;
            font-weight: 400;
            display: block;
            margin-top: 4px;
        }

        /* --- CALCULATOR STYLES --- */
        .calc-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
            border: 1px solid #eee;
        }
        .calc-input {
            flex: 1; border: none; background: transparent;
            font-size: 1.1rem; font-weight: bold; color: var(--p);
            padding: 10px; outline: none; text-align: center;
        }
        .calc-select {
            border: none; background: #e9ecef; border-radius: 8px;
            padding: 8px; font-size: 0.8rem; color: #555;
        }
        .calc-result {
            font-size: 1.4rem; font-weight: 800; color: var(--p);
            margin-top: 10px; font-family: monospace;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="nav-pill-container">
            <div class="nav-pill active" onclick="setTab('pocket')">Pocket Mode</div>
            <div class="nav-pill" onclick="setTab('pitch')">The Pitch</div>
            <div class="nav-pill" onclick="setTab('specs')">Data</div>
        </div>
    </div>

    <div id="pocket" class="content">
        
        <div class="card">
            <h3>The Vibe Check</h3>
            <p style="color:#666; font-size:0.9rem;">Establish the ground rules before you measure.</p>
            
            <div class="prompt-box">
                <span class="prompt-label">Ask The Client:</span>
                <span class="prompt-text">"Before I pull out the laser... Are we measuring to buy today, or are we just 'kicking tyres'?"</span>
            </div>

            <div class="btn-grid">
                <button class="btn primary" onclick="showResponse('vibe_real')">
                    They said: "We're Serious"
                    <span class="sub-text"> Proceed to Measure.</span>
                </button>
                <button class="btn" onclick="showResponse('vibe_tyre')">
                    They said: "Just Looking"
                    <span class="sub-text">Switch to 'Speed Quote' mode.</span>
                </button>
            </div>
            <div id="vibe_resp" style="margin-top:15px; font-weight:bold; color:var(--p);"></div>
        </div>

        <div class="card">
            <h3>Plan Decoder</h3>
            <div class="calc-row">
                <input type="number" id="wInput" class="calc-input" placeholder="Width" oninput="calcDims()">
                <select id="wUnit" class="calc-select" onchange="calcDims()"><option value="mm">mm</option><option value="c">Crse</option></select>
            </div>
            <div class="calc-row">
                <input type="number" id="hInput" class="calc-input" placeholder="Height" oninput="calcDims()">
                <select id="hUnit" class="calc-select" onchange="calcDims()"><option value="c">Crse</option><option value="mm">mm</option></select>
            </div>
            <div id="finalDim" class="calc-result">- x -</div>
        </div>
    </div>

    <div id="pitch" class="content hidden">
        
        <div id="step1" class="card">
            <h3>Step 1: The Reveal</h3>
            <p>Present the full retail price. Do NOT discount yet.</p>
            <div class="prompt-box">
                <span class="prompt-label">The Script:</span>
                <span class="prompt-text">"Based on the measurements, the total investment for the premium finish is..."</span>
            </div>
            <div class="btn-grid">
                <button class="btn" onclick="nextStep('step2_ouch')">Client Winces / Says "Ouch"</button>
                <button class="btn" onclick="nextStep('step2_silent')">Client is Silent (Poker Face)</button>
                <button class="btn danger" onclick="nextStep('step2_impossible')">Client Laughs / Says "No Way"</button>
            </div>
        </div>

        <div id="step2_ouch" class="card hidden">
            <h3>Step 2: The Hesitation</h3>
            <p>They want it, but the price hurts. Time for the "If I... Will You?"</p>
            
            <div class="prompt-box">
                <span class="prompt-label">Ask The Client:</span>
                <span class="prompt-text">"I can see you hesitating. If I could sharpen this pencil to meet your target, would you be happy to sign the paperwork right now?"</span>
            </div>

            <div class="btn-grid">
                <button class="btn primary" onclick="nextStep('step3_deal')">
                    They said: "YES"
                    <span class="sub-text">Commitment locked. Call Manager.</span>
                </button>
                <button class="btn" onclick="nextStep('step3_stall')">
                    They said: "MAYBE"
                    <span class="sub-text">"I still need to think about it..."</span>
                </button>
            </div>
            <button style="margin-top:15px; border:none; background:none; color:#888;" onclick="resetPitch()">Start Over</button>
        </div>

        <div id="step2_impossible" class="card hidden">
            <h3>Step 2: The Reality Check</h3>
            <p>The gap is too big for a discount. We need to Descope.</p>
            
            <div class="prompt-box">
                <span class="prompt-label">Ask The Client:</span>
                <span class="prompt-text">"Okay, I've clearly over-specced this. To fit the budget, should we change the Fabric or remove the Motorisation?"</span>
            </div>

            <div class="btn-grid">
                <button class="btn" onclick="resetPitch()">Recalculate Quote</button>
                <button class="btn danger" onclick="nextStep('step3_exit')">They won't budge (Exit)</button>
            </div>
        </div>

        <div id="step3_stall" class="card hidden">
            <h3>The Stall Detector</h3>
            <p>They wouldn't commit. What is the excuse?</p>
            <div class="btn-grid">
                <button class="btn" onclick="showObjection('partner')">"Need to ask Partner"</button>
                <button class="btn" onclick="showObjection('think')">"Need to Think about it"</button>
                <button class="btn" onclick="showObjection('shop')">"Getting other Quotes"</button>
            </div>
            
            <div id="obj_response" class="prompt-box hidden" style="background:#fff3cd; border-color:#ffc107;">
                <span class="prompt-label">The Response:</span>
                <span id="obj_text" class="prompt-text"></span>
            </div>
            <button style="margin-top:15px; border:none; background:none; color:#888;" onclick="resetPitch()">Start Over</button>
        </div>

        <div id="step3_deal" class="card hidden" style="border-top-color: var(--safe);">
            <h3>ðŸŽ‰ Green Light</h3>
            <p>They committed. You are safe to discount.</p>
            <div class="prompt-box">
                <span class="prompt-label">Action:</span>
                <span class="prompt-text">"Fantastic. Let me call my manager to get approval for that number. Get the paperwork ready."</span>
            </div>
            <button class="btn primary" onclick="resetPitch()">New Client</button>
        </div>
    </div>

    <div id="specs" class="content hidden">
        <div class="card">
            <h3>Cheat Guide</h3>
            <input type="text" id="dbSearch" placeholder="Search specs..." style="width:100%; padding:12px; border:1px solid #ddd; border-radius:8px; box-sizing:border-box;" onkeyup="filterDB()">
            <div id="dbList" style="text-align:left; margin-top:15px;">
                </div>
        </div>
    </div>

<script>
    // --- NAVIGATION ---
    function setTab(id) {
        document.querySelectorAll('.content').forEach(el => el.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        document.querySelectorAll('.nav-pill').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active');
    }

    // --- POCKET MODE LOGIC ---
    function showResponse(type) {
        const div = document.getElementById('vibe_resp');
        if(type === 'vibe_real') div.innerText = "Excellent. Get the Laser.";
        if(type === 'vibe_tyre') div.innerText = "Action: Measure 1 window only as a 'Sample Quote'.";
    }

    function calcDims() {
        const wVal = document.getElementById('wInput').value;
        const wUnit = document.getElementById('wUnit').value;
        const hVal = document.getElementById('hInput').value;
        const hUnit = document.getElementById('hUnit').value;
        
        let finalW = wVal ? (wUnit === 'c' ? Math.round(wVal * 89) : wVal) : "-";
        let finalH = hVal ? (hUnit === 'c' ? Math.round(hVal * 89) : hVal) : "-";
        
        document.getElementById('finalDim').innerText = `${finalW} x ${finalH}`;
    }

    // --- PITCH MODE LOGIC ---
    function nextStep(id) {
        document.querySelectorAll('#pitch .card').forEach(el => el.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function resetPitch() {
        document.querySelectorAll('#pitch .card').forEach(el => el.classList.add('hidden'));
        document.getElementById('step1').classList.remove('hidden');
        document.getElementById('obj_response').classList.add('hidden');
    }

    function showObjection(type) {
        const box = document.getElementById('obj_response');
        const txt = document.getElementById('obj_text');
        box.classList.remove('hidden');

        if(type === 'partner') {
            txt.innerText = "âš ï¸ Truth Check: \"Is this a polite 'No'? If they were here right now, would we be signing? Let's FaceTime them.\"";
        } else if (type === 'think') {
            txt.innerText = "âš ï¸ Reality Check: \"Usually 'Thinking' means 'Googling Cheaper Stuff'. What is the ONE worry stopping you?\"";
        } else if (type === 'shop') {
            txt.innerText = "âš ï¸ Value Check: \"Smart. But if you don't have my final price, you have nothing to compare them to. Let me be the benchmark.\"";
        }
    }

    // --- DATA LOGIC ---
    const dbData = [
        {k:"Brick Course", v:"89mm"},
        {k:"Roller Recess", v:"60mm"},
        {k:"S-Fold Stack", v:"~30% Width"},
        {k:"Shutter Blade", v:"63/89/114mm"},
        {k:"Door Height", v:"2040mm Std"}
    ];
    
    const list = document.getElementById('dbList');
    dbData.forEach(d => {
        list.innerHTML += `<div class="db-item" style="padding:10px; border-bottom:1px solid #eee; display:flex; justify-content:space-between;"><b>${d.k}</b><span style="font-family:monospace; color:var(--p);">${d.v}</span></div>`;
    });

    function filterDB() {
        const term = document.getElementById('dbSearch').value.toLowerCase();
        const items = document.querySelectorAll('.db-item');
        items.forEach(i => {
            i.style.display = i.innerText.toLowerCase().includes(term) ? 'flex' : 'none';
        });
    }
</script>

</body>
</html>
